<?xml version="1.0" encoding="utf-8"?>
<html>
  <head>
    <title>Native Compilation Advisor evaluation results for [API_SPOT2000].[SPDashboard_ClientAccount_sl_Fields_xml]</title>
  </head>
  <body>
    <p STYLE="font-family: Verdana, Arial, sans-serif; font-size: 14pt;">
      <b>Native Compilation Advisor evaluation results for [API_SPOT2000].[SPDashboard_ClientAccount_sl_Fields_xml]</b>
    </p>
    <p STYLE="font-family: Verdana, Arial, sans-serif; font-size: 10pt;">
      <b>Report Date/Time:</b>3/11/2019 10:31 AM<br /></p>
    <table border="1" cellpadding="5" cellspacing="0" STYLE="font-family: Verdana, Arial, sans-serif; font-size: 9pt;">
      <tr style="background-color:Silver">
        <th colspan="1" align="center">Transact-SQL Element</th>
        <th align="center">Transact-SQL Code</th>
        <th align="center">Line Number</th>
      </tr>
      <tr valign="top">
        <td colspan="1">OBJECT_ID</td>
        <td colspan="1">OBJECT_ID('tempdb..#t')</td>
        <td>3</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1">One-part names</td>
        <td colspan="1">EXECUTE sp_xml_preparedocument @handle OUTPUT, @ClientAccountIDs_xml</td>
        <td>9</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">#t</td>
        <td>11</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">ClientAccount AS ca WITH (NOLOCK)</td>
        <td>76</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">#t AS ids</td>
        <td>77</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">esm_spAccountNode AS an WITH (NOLOCK)</td>
        <td>78</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">esm_spAccount AS a WITH (NOLOCK)</td>
        <td>79</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">ESM_SPUser AS u WITH (NOLOCK)</td>
        <td>80</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">ClientAccountEmailAddress AS cae WITH (NOLOCK)</td>
        <td>81</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">ClientAccountAddress AS Billing WITH (NOLOCK)</td>
        <td>82</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">ClientAccountDate AS Birthdate WITH (NOLOCK)</td>
        <td>84</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">ClientAccountFrequentBuyer AS CAFB WITH (NOLOCK)</td>
        <td>87</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">ESM_SPAccountWebsite AS HomePage WITH (NOLOCK)</td>
        <td>88</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">ESM_SPAccountWebsite AS FaceBook WITH (NOLOCK)</td>
        <td>90</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">ESM_SPAccountWebsite AS Twitter WITH (NOLOCK)</td>
        <td>92</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">ESM_SPAccountWebsite AS LinkedIn WITH (NOLOCK)</td>
        <td>94</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">ESM_SPAccountWebsite AS MobileApp WITH (NOLOCK)</td>
        <td>96</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">ESM_SPAccountWebsite AS CustomerConnect WITH (NOLOCK)</td>
        <td>98</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">ESM_SPAccountWebsite AS Other1Url WITH (NOLOCK)</td>
        <td>100</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">ESM_SPAccountWebsite AS Other2Url WITH (NOLOCK)</td>
        <td>102</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">ESM_SPAccountContact AS AC WITH (NOLOCK)</td>
        <td>104</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">ESM_SPAccountContact AS ACB WITH (NOLOCK)</td>
        <td>107</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">ESM_SPAccountContact AS ACO WITH (NOLOCK)</td>
        <td>111</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">ESM_SPAccountNodeGroupAssignment AS anga WITH (NOLOCK)</td>
        <td>114</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">ESM_SPAccountNodeGroup AS ang WITH (NOLOCK)</td>
        <td>115</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1">OPENXML</td>
        <td colspan="1">OPENXML (@handle, '/xL/x', 2) WITH (x UNIQUEIDENTIFIER '.')</td>
        <td>12</td>
      </tr>
      <tr valign="top">
        <td colspan="1">CASE</td>
        <td colspan="1">CASE WHEN ISNULL(Billing.Address1, '') = '' THEN ca.Address1 ELSE Billing.Address1 END</td>
        <td>33</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN ISNULL(Billing.Address1, '') = '' THEN ca.Address2 ELSE Billing.Address2 END</td>
        <td>34</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN ISNULL(Billing.Address1, '') = '' THEN ca.City ELSE Billing.City END</td>
        <td>35</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN ISNULL(Billing.Address1, '') = '' THEN ca.State ELSE Billing.State END</td>
        <td>36</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN ISNULL(Billing.Address1, '') = '' THEN ca.Zip ELSE Billing.PostalCode END</td>
        <td>37</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1">APPLY</td>
        <td colspan="1">ClientAccount AS ca WITH (NOLOCK)
INNER JOIN
#t AS ids
ON ids.id = ca.InstanceID
LEFT OUTER JOIN
esm_spAccountNode AS an WITH (NOLOCK)
ON an.InstanceID = ca.spAccountNodeID
LEFT OUTER JOIN
esm_spAccount AS a WITH (NOLOCK)
ON a.InstanceID = an.spAccountID
LEFT OUTER JOIN
ESM_SPUser AS u WITH (NOLOCK)
ON u.InstanceID = ca.SignupUserID
LEFT OUTER JOIN
ClientAccountEmailAddress AS cae WITH (NOLOCK)
ON ca.InstanceID = cae.ClientAccountID
LEFT OUTER JOIN
ClientAccountAddress AS Billing WITH (NOLOCK)
ON CA.InstanceID = Billing.ClientAccountID
   AND Billing.AddressTypeID = 4
LEFT OUTER JOIN
ClientAccountDate AS Birthdate WITH (NOLOCK)
ON CA.InstanceID = Birthdate.ClientAccountID
   AND Birthdate.DateTypeID = 180
LEFT OUTER JOIN
dbo.GetNotificationPhoneList('Batch SMS') AS SMS
ON CA.InstanceID = SMS.ClientAccountID
LEFT OUTER JOIN
ClientAccountFrequentBuyer AS CAFB WITH (NOLOCK)
ON CA.InstanceID = CAFB.ClientAccountID
LEFT OUTER JOIN
ESM_SPAccountWebsite AS HomePage WITH (NOLOCK)
ON AN.SPAccountID = HomePage.SPAccountID
   AND HomePage.Title = 'HomePage'
LEFT OUTER JOIN
ESM_SPAccountWebsite AS FaceBook WITH (NOLOCK)
ON AN.SPAccountID = FaceBook.SPAccountID
   AND FaceBook.Title = 'FaceBook'
LEFT OUTER JOIN
ESM_SPAccountWebsite AS Twitter WITH (NOLOCK)
ON AN.SPAccountID = Twitter.SPAccountID
   AND Twitter.Title = 'Twitter'
LEFT OUTER JOIN
ESM_SPAccountWebsite AS LinkedIn WITH (NOLOCK)
ON AN.SPAccountID = LinkedIn.SPAccountID
   AND LinkedIn.Title = 'LinkedIn'
LEFT OUTER JOIN
ESM_SPAccountWebsite AS MobileApp WITH (NOLOCK)
ON AN.SPAccountID = MobileApp.SPAccountID
   AND MobileApp.Title = 'MobileApp'
LEFT OUTER JOIN
ESM_SPAccountWebsite AS CustomerConnect WITH (NOLOCK)
ON AN.SPAccountID = CustomerConnect.SPAccountID
   AND CustomerConnect.Title = 'CustomerConnect'
LEFT OUTER JOIN
ESM_SPAccountWebsite AS Other1Url WITH (NOLOCK)
ON AN.SPAccountID = Other1Url.SPAccountID
   AND Other1Url.Title = 'Other1Url'
LEFT OUTER JOIN
ESM_SPAccountWebsite AS Other2Url WITH (NOLOCK)
ON AN.SPAccountID = Other2Url.SPAccountID
   AND Other2Url.Title = 'Other2Url'
LEFT OUTER JOIN
ESM_SPAccountContact AS AC WITH (NOLOCK)
ON AN.SPAccountID = AC.SPAccountID
   AND AC.[Primary] = 1 OUTER APPLY (SELECT TOP 1 *
                                     FROM   ESM_SPAccountContact AS ACB WITH (NOLOCK)
                                     WHERE  ACB.SPAccountID = AN.SPAccountID
                                            AND ACB.TitleOrRole = 'Billing') AS ACB OUTER APPLY (SELECT TOP 1 *
                                                                                                 FROM   ESM_SPAccountContact AS ACO WITH (NOLOCK)
                                                                                                 WHERE  ACO.SPAccountID = AN.SPAccountID
                                                                                                        AND ACO.TitleOrRole = 'Office') AS ACO</td>
        <td>76</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">ClientAccount AS ca WITH (NOLOCK)
INNER JOIN
#t AS ids
ON ids.id = ca.InstanceID
LEFT OUTER JOIN
esm_spAccountNode AS an WITH (NOLOCK)
ON an.InstanceID = ca.spAccountNodeID
LEFT OUTER JOIN
esm_spAccount AS a WITH (NOLOCK)
ON a.InstanceID = an.spAccountID
LEFT OUTER JOIN
ESM_SPUser AS u WITH (NOLOCK)
ON u.InstanceID = ca.SignupUserID
LEFT OUTER JOIN
ClientAccountEmailAddress AS cae WITH (NOLOCK)
ON ca.InstanceID = cae.ClientAccountID
LEFT OUTER JOIN
ClientAccountAddress AS Billing WITH (NOLOCK)
ON CA.InstanceID = Billing.ClientAccountID
   AND Billing.AddressTypeID = 4
LEFT OUTER JOIN
ClientAccountDate AS Birthdate WITH (NOLOCK)
ON CA.InstanceID = Birthdate.ClientAccountID
   AND Birthdate.DateTypeID = 180
LEFT OUTER JOIN
dbo.GetNotificationPhoneList('Batch SMS') AS SMS
ON CA.InstanceID = SMS.ClientAccountID
LEFT OUTER JOIN
ClientAccountFrequentBuyer AS CAFB WITH (NOLOCK)
ON CA.InstanceID = CAFB.ClientAccountID
LEFT OUTER JOIN
ESM_SPAccountWebsite AS HomePage WITH (NOLOCK)
ON AN.SPAccountID = HomePage.SPAccountID
   AND HomePage.Title = 'HomePage'
LEFT OUTER JOIN
ESM_SPAccountWebsite AS FaceBook WITH (NOLOCK)
ON AN.SPAccountID = FaceBook.SPAccountID
   AND FaceBook.Title = 'FaceBook'
LEFT OUTER JOIN
ESM_SPAccountWebsite AS Twitter WITH (NOLOCK)
ON AN.SPAccountID = Twitter.SPAccountID
   AND Twitter.Title = 'Twitter'
LEFT OUTER JOIN
ESM_SPAccountWebsite AS LinkedIn WITH (NOLOCK)
ON AN.SPAccountID = LinkedIn.SPAccountID
   AND LinkedIn.Title = 'LinkedIn'
LEFT OUTER JOIN
ESM_SPAccountWebsite AS MobileApp WITH (NOLOCK)
ON AN.SPAccountID = MobileApp.SPAccountID
   AND MobileApp.Title = 'MobileApp'
LEFT OUTER JOIN
ESM_SPAccountWebsite AS CustomerConnect WITH (NOLOCK)
ON AN.SPAccountID = CustomerConnect.SPAccountID
   AND CustomerConnect.Title = 'CustomerConnect'
LEFT OUTER JOIN
ESM_SPAccountWebsite AS Other1Url WITH (NOLOCK)
ON AN.SPAccountID = Other1Url.SPAccountID
   AND Other1Url.Title = 'Other1Url'
LEFT OUTER JOIN
ESM_SPAccountWebsite AS Other2Url WITH (NOLOCK)
ON AN.SPAccountID = Other2Url.SPAccountID
   AND Other2Url.Title = 'Other2Url'
LEFT OUTER JOIN
ESM_SPAccountContact AS AC WITH (NOLOCK)
ON AN.SPAccountID = AC.SPAccountID
   AND AC.[Primary] = 1 OUTER APPLY (SELECT TOP 1 *
                                     FROM   ESM_SPAccountContact AS ACB WITH (NOLOCK)
                                     WHERE  ACB.SPAccountID = AN.SPAccountID
                                            AND ACB.TitleOrRole = 'Billing') AS ACB</td>
        <td>76</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1">NOLOCK</td>
        <td colspan="1">NOLOCK</td>
        <td>76</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">NOLOCK</td>
        <td>78</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">NOLOCK</td>
        <td>79</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">NOLOCK</td>
        <td>80</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">NOLOCK</td>
        <td>81</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">NOLOCK</td>
        <td>82</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">NOLOCK</td>
        <td>84</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">NOLOCK</td>
        <td>87</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">NOLOCK</td>
        <td>88</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">NOLOCK</td>
        <td>90</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">NOLOCK</td>
        <td>92</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">NOLOCK</td>
        <td>94</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">NOLOCK</td>
        <td>96</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">NOLOCK</td>
        <td>98</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">NOLOCK</td>
        <td>100</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">NOLOCK</td>
        <td>102</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">NOLOCK</td>
        <td>104</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">NOLOCK</td>
        <td>107</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">NOLOCK</td>
        <td>111</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">NOLOCK</td>
        <td>114</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">NOLOCK</td>
        <td>115</td>
      </tr>
      <tr valign="top">
        <td colspan="1">Table-valued functions</td>
        <td colspan="1">dbo.GetNotificationPhoneList('Batch SMS') AS SMS</td>
        <td>86</td>
      </tr>
    </table>
  </body>
</html>