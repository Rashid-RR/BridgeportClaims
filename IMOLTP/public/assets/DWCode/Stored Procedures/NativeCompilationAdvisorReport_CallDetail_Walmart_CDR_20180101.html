<?xml version="1.0" encoding="utf-8"?>
<html>
  <head>
    <title>Native Compilation Advisor evaluation results for [DWCode].[CallDetail_Walmart_CDR]</title>
  </head>
  <body>
    <p STYLE="font-family: Verdana, Arial, sans-serif; font-size: 14pt;">
      <b>Native Compilation Advisor evaluation results for [DWCode].[CallDetail_Walmart_CDR]</b>
    </p>
    <p STYLE="font-family: Verdana, Arial, sans-serif; font-size: 10pt;">
      <b>Report Date/Time:</b>1/1/2018 5:11 PM<br /></p>
    <table border="1" cellpadding="5" cellspacing="0" STYLE="font-family: Verdana, Arial, sans-serif; font-size: 9pt;">
      <tr style="background-color:Silver">
        <th colspan="1" align="center">Transact-SQL Element</th>
        <th align="center">Transact-SQL Code</th>
        <th align="center">Line Number</th>
      </tr>
      <tr valign="top">
        <td colspan="1">SET OPTION ON</td>
        <td colspan="1">SET XACT_ABORT ON</td>
        <td>17</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">SET NOCOUNT ON</td>
        <td>18</td>
      </tr>
      <tr valign="top">
        <td colspan="1">BEGIN TRANSACTION</td>
        <td colspan="1">BEGIN TRANSACTION</td>
        <td>20</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1">One-part names</td>
        <td colspan="1">EXECUTE LockCriticalSection 'CallDetail_Walmart_CDR'</td>
        <td>21</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">#ContactLogLastDisposition AS clld</td>
        <td>80</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">#HeaderTemp AS l</td>
        <td>200</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">#HeldPartyAbndns AS hpa</td>
        <td>208</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">#refusals AS rfl</td>
        <td>209</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">#Transfers AS trn</td>
        <td>210</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">#ContactLogDisposition AS cld</td>
        <td>211</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">#Conferences AS cnf</td>
        <td>212</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">#Spawns AS spn</td>
        <td>213</td>
      </tr>
      <tr valign="top">
        <td colspan="1">SELECT INTO</td>
        <td colspan="1">SELECT   [Contact_ID],
         MAX([Start_Date]) AS [Start_Date]
INTO     #ContactLogLastDisposition
FROM     [dbo].[Contact_Log_Dispositions]
WHERE    [bus_no] = @_Bus_no
         AND [Start_Date] BETWEEN @_UTCStart_Date AND @_UTCEnd_Date
GROUP BY [Contact_ID]</td>
        <td>64</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">SELECT clld.[Contact_ID],
       d.[Description],
       clds.[Disposition_Comments],
       clds.[Disposition_Code]
INTO   #ContactLogDisposition
FROM   #ContactLogLastDisposition AS clld
       INNER JOIN
       [dbo].[Contact_Log_Dispositions] AS clds
       ON clds.[Contact_ID] = clld.[Contact_ID]
          AND clds.[START_DATE] = clld.[START_DATE]
       INNER JOIN
       [dbo].[Dispositions] AS d
       ON d.[Disposition_Code] = clds.[Disposition_Code]</td>
        <td>74</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">SELECT [Contact_ID]
INTO   #HeldPartyAbndns
FROM   [DBO].[Agent_Log_DetailQV]
WHERE  [bus_no] = @_Bus_no
       AND [StartDate] BETWEEN @_UTCStart_Date AND @_UTCEnd_Date
       AND [Outstate_code] = -2</td>
        <td>85</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">SELECT [Contact_ID]
INTO   #refusals
FROM   [DBO].[Agent_Log_DetailQV]
WHERE  [bus_no] = @_Bus_no
       AND [StartDate] BETWEEN @_UTCStart_Date AND @_UTCEnd_Date
       AND [Outstate_code] = -1</td>
        <td>93</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">SELECT   d.[Contact_ID],
         SUM([Duration_seconds]) AS TranTime
INTO     #Transfers
FROM     [dbo].[Contact_Log_Detail] AS d
         LEFT OUTER JOIN
         [dbo].[Contact_log_detail_summary] AS Summary
         ON Summary.[contact_id] = d.[Contact_ID]
            AND Summary.[StateIndex] = d.[StateIndex]
WHERE    d.[bus_no] = @_Bus_no
         AND d.[Start_Date] BETWEEN @_UTCStart_Date AND @_UTCEnd_Date
         AND [contact_state] = 5
GROUP BY d.[Contact_ID]
OPTION (TABLE HINT(d, INDEX ([IX_Contact_Log_Detail_Contact_State_Start_Date_INCLUDE_Contact_Id_StateIndex])))</td>
        <td>101</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">SELECT   d.[Contact_ID],
         SUM([Duration]) AS ConfTime,
         COUNT(*) AS ConfCount
INTO     #Conferences
FROM     [dbo].[Contact_Log_Detail] AS d
         LEFT OUTER JOIN
         [dbo].[Contact_log_detail_summary] AS Summary
         ON Summary.[contact_id] = d.[Contact_ID]
            AND Summary.[StateIndex] = d.[StateIndex]
WHERE    d.[bus_no] = @_Bus_no
         AND d.[Start_Date] BETWEEN @_UTCStart_Date AND @_UTCEnd_Date
         AND [contact_state] = 14
GROUP BY d.[Contact_ID]
OPTION (TABLE HINT(d, INDEX ([IX_Contact_Log_Detail_Contact_State_Start_Date_INCLUDE_Contact_Id_StateIndex])))</td>
        <td>114</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">SELECT   d.Contact_ID,
         COUNT(*) AS SpnCount
INTO     #Spawns
FROM     [dbo].[Contact_Log_Detail] AS d
WHERE    d.[bus_no] = @_Bus_no
         AND d.[Start_Date] BETWEEN @_UTCStart_Date AND @_UTCEnd_Date
         AND [contact_state] = 16
GROUP BY d.[Contact_ID]
OPTION (TABLE HINT(d, INDEX ([IX_Contact_Log_Detail_Contact_State_Start_Date_INCLUDE_Contact_Id_StateIndex])))</td>
        <td>128</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">SELECT *
INTO   #HeaderTemp
FROM   [dbo].[Contact_Log_Header] AS h
WHERE  h.[bus_no] = @_Bus_no
       AND h.[start_date] BETWEEN @_UTCStart_Date AND @_UTCEnd_Date
OPTION (TABLE HINT(h, INDEX ([IX_Contact_Log_Header_Bus_no_start_date])))</td>
        <td>139</td>
      </tr>
      <tr valign="top">
        <td colspan="1">*</td>
        <td colspan="1">SELECT *
INTO   #HeaderTemp
FROM   [dbo].[Contact_Log_Header] AS h
WHERE  h.[bus_no] = @_Bus_no
       AND h.[start_date] BETWEEN @_UTCStart_Date AND @_UTCEnd_Date
OPTION (TABLE HINT(h, INDEX ([IX_Contact_Log_Header_Bus_no_start_date])))</td>
        <td>139</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1">CASE</td>
        <td colspan="1">CASE WHEN trn.[TranTime] &gt; 0 THEN 1 ELSE 0 END</td>
        <td>178</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN hpa.[contact_ID] IS NOT NULL THEN 1 ELSE 0 END</td>
        <td>185</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN rfl.[contact_ID] IS NOT NULL THEN 1 ELSE 0 END</td>
        <td>189</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN r.[Inbound] = 'T'
          AND s.[inqueue_time] &lt; 1
          AND s.[activetalk_time] = 0 THEN 1 ELSE 0 END</td>
        <td>195</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1">COMMIT TRANSACTION</td>
        <td colspan="1">COMMIT TRANSACTION</td>
        <td>216</td>
      </tr>
    </table>
  </body>
</html>