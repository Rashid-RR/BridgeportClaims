<?xml version="1.0" encoding="utf-8"?>
<html>
  <head>
    <title>Native Compilation Advisor evaluation results for [DWCode].[CallDetail_Extra_Space_Storage_Service_IVR_Detail_Report]</title>
  </head>
  <body>
    <p STYLE="font-family: Verdana, Arial, sans-serif; font-size: 14pt;">
      <b>Native Compilation Advisor evaluation results for [DWCode].[CallDetail_Extra_Space_Storage_Service_IVR_Detail_Report]</b>
    </p>
    <p STYLE="font-family: Verdana, Arial, sans-serif; font-size: 10pt;">
      <b>Report Date/Time:</b>1/1/2018 5:09 PM<br /></p>
    <table border="1" cellpadding="5" cellspacing="0" STYLE="font-family: Verdana, Arial, sans-serif; font-size: 9pt;">
      <tr style="background-color:Silver">
        <th colspan="1" align="center">Transact-SQL Element</th>
        <th align="center">Transact-SQL Code</th>
        <th align="center">Line Number</th>
      </tr>
      <tr valign="top">
        <td colspan="1">SET OPTION ON</td>
        <td colspan="1">SET XACT_ABORT ON</td>
        <td>3</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">SET NOCOUNT ON</td>
        <td>4</td>
      </tr>
      <tr valign="top">
        <td colspan="1">BEGIN TRANSACTION</td>
        <td colspan="1">BEGIN TRANSACTION</td>
        <td>6</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1">One-part names</td>
        <td colspan="1">EXECUTE LockCriticalSection 'CallDetail_Extra_Space_Storage_Service_IVR_Detail_Report'</td>
        <td>8</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">#ESSTmp_Values AS S</td>
        <td>90</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1">SELECT INTO</td>
        <td colspan="1">SELECT Contact_Id,
       [Begin],
       [Language],
       [PhoneNumber],
       [ValidZipCode],
       [InvalidZipCode],
       [TransferNoZipCode],
       [TransferNoPhone],
       [ExistingCustomer],
       [NonExistingCustomer],
       [TransferInfoInquiry],
       [AuctionInterest],
       [TransferInvalidInput],
       [TransferLien],
       [Balance],
       [TransferBalance],
       [Payment],
       [TransferAfterFacilityInfoPayment],
       [FacilityAddressPhone],
       [FacilityOfficeHours],
       [FacilityGateHours],
       [GateCodeAssistance],
       [GateDoesntOpen],
       [EmergencyHotlineUnableToExit],
       [EmergencyHotlineFacilityClosed],
       [EmergencyHotlineGateOpenFacilityClosed],
       [EmergencyHotlineTempCodeDoesntWork],
       [ValidCC],
       [InvalidCC],
       [InvalidExpDate],
       [SuccessfulPayment],
       [UnsuccessfulPayment],
       [DifferentCard],
       [CheckRatesAvailability],
       [BalancePayment],
       [ReservationInquiry],
       [OtherQuestions],
       [TransferLocation],
       [EndInIVR],
       [Path]
INTO   #ESSTmp_Values
FROM   (SELECT contact_ID,
               data_name,
               data_value
        FROM   dbo.custom_contact_log AS L
        WHERE  Bus_No = @P_Bus_no
               AND start_date BETWEEN @P_UTCStart_Date AND @P_UTCEnd_Date) AS SourceTable PIVOT (MAX (data_value) FOR data_name IN ([Begin], [Language], [PhoneNumber], [ValidZipCode], [InvalidZipCode], [TransferNoZipCode], [TransferNoPhone], [ExistingCustomer], [NonExistingCustomer], [TransferInfoInquiry], [AuctionInterest], [TransferInvalidInput], [TransferLien], [Balance], [TransferBalance], [Payment], [TransferAfterFacilityInfoPayment], [FacilityAddressPhone], [FacilityOfficeHours], [FacilityGateHours], [GateCodeAssistance], [GateDoesntOpen], [EmergencyHotlineUnableToExit], [EmergencyHotlineFacilityClosed], [EmergencyHotlineGateOpenFacilityClosed], [EmergencyHotlineTempCodeDoesntWork], [ValidCC], [InvalidCC], [InvalidExpDate], [SuccessfulPayment], [UnsuccessfulPayment], [DifferentCard], [CheckRatesAvailability], [BalancePayment], [ReservationInquiry], [OtherQuestions], [TransferLocation], [EndInIVR], [Path])) AS Pvt</td>
        <td>22</td>
      </tr>
      <tr valign="top">
        <td colspan="1">PIVOT</td>
        <td colspan="1">(SELECT contact_ID,
        data_name,
        data_value
 FROM   dbo.custom_contact_log AS L
 WHERE  Bus_No = @P_Bus_no
        AND start_date BETWEEN @P_UTCStart_Date AND @P_UTCEnd_Date) AS SourceTable PIVOT (MAX (data_value) FOR data_name IN ([Begin], [Language], [PhoneNumber], [ValidZipCode], [InvalidZipCode], [TransferNoZipCode], [TransferNoPhone], [ExistingCustomer], [NonExistingCustomer], [TransferInfoInquiry], [AuctionInterest], [TransferInvalidInput], [TransferLien], [Balance], [TransferBalance], [Payment], [TransferAfterFacilityInfoPayment], [FacilityAddressPhone], [FacilityOfficeHours], [FacilityGateHours], [GateCodeAssistance], [GateDoesntOpen], [EmergencyHotlineUnableToExit], [EmergencyHotlineFacilityClosed], [EmergencyHotlineGateOpenFacilityClosed], [EmergencyHotlineTempCodeDoesntWork], [ValidCC], [InvalidCC], [InvalidExpDate], [SuccessfulPayment], [UnsuccessfulPayment], [DifferentCard], [CheckRatesAvailability], [BalancePayment], [ReservationInquiry], [OtherQuestions], [TransferLocation], [EndInIVR], [Path])) AS Pvt</td>
        <td>28</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1">CASE</td>
        <td colspan="1">CASE WHEN S.[Begin] = 'Yes' THEN '1' ELSE '0' END</td>
        <td>49</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN S.Language &lt;&gt; '' THEN S.Language ELSE 'N/A' END</td>
        <td>50</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN S.PhoneNumber = 'Yes' THEN '1' ELSE '0' END</td>
        <td>51</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN S.ValidZipCode &lt;&gt; '' THEN '1' ELSE '0' END</td>
        <td>52</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN S.InvalidZipCode &lt;&gt; '' THEN '1' ELSE '0' END</td>
        <td>53</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN S.TransferNoZipCode &lt;&gt; '' THEN '1' ELSE '0' END</td>
        <td>54</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN S.TransferNoPhone &lt;&gt; '' THEN '1' ELSE '0' END</td>
        <td>55</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN S.ExistingCustomer &lt;&gt; '' THEN '1' ELSE '0' END</td>
        <td>56</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN S.NonExistingCustomer &lt;&gt; '' THEN '1' ELSE '0' END</td>
        <td>57</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN S.TransferInfoInquiry &lt;&gt; '' THEN '1' ELSE '0' END</td>
        <td>58</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN S.AuctionInterest &lt;&gt; '' THEN '1' ELSE '0' END</td>
        <td>59</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN S.TransferInvalidInput &lt;&gt; '' THEN '1' ELSE '0' END</td>
        <td>60</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN S.TransferLien &lt;&gt; '' THEN '1' ELSE '0' END</td>
        <td>61</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN S.Balance = 'Yes' THEN '1' WHEN S.Balance = 'No' THEN '0' ELSE 'N/A' END</td>
        <td>62</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN S.TransferBalance &lt;&gt; '' THEN '1' ELSE '0' END</td>
        <td>63</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN S.Payment &lt;&gt; '' THEN '1' ELSE '0' END</td>
        <td>64</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN S.TransferAfterFacilityInfoPayment &lt;&gt; '' THEN '1' ELSE '0' END</td>
        <td>65</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN S.FacilityAddressPhone &lt;&gt; '' THEN '1' ELSE '0' END</td>
        <td>66</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN S.FacilityOfficeHours &lt;&gt; '' THEN '1' ELSE '0' END</td>
        <td>67</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN S.FacilityGateHours &lt;&gt; '' THEN '1' ELSE '0' END</td>
        <td>68</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN S.GateCodeAssistance &lt;&gt; '' THEN '1' ELSE '0' END</td>
        <td>69</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN S.GateDoesntOpen &lt;&gt; '' THEN '1' ELSE '0' END</td>
        <td>70</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN S.EmergencyHotlineUnableToExit &lt;&gt; '' THEN '1' ELSE '0' END</td>
        <td>71</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN S.EmergencyHotlineFacilityClosed &lt;&gt; '' THEN '1' ELSE '0' END</td>
        <td>72</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN S.EmergencyHotlineGateOpenFacilityClosed &lt;&gt; '' THEN '1' ELSE '0' END</td>
        <td>73</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN S.EmergencyHotlineTempCodeDoesntWork &lt;&gt; '' THEN '1' ELSE '0' END</td>
        <td>74</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN S.ValidCC &lt;&gt; '' THEN '1' ELSE '0' END</td>
        <td>75</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN S.InvalidCC &lt;&gt; '' THEN '1' ELSE '0' END</td>
        <td>76</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN S.InvalidExpDate &lt;&gt; '' THEN '1' ELSE '0' END</td>
        <td>77</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN S.SuccessfulPayment &lt;&gt; '' THEN '1' ELSE '0' END</td>
        <td>78</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN S.UnsuccessfulPayment &lt;&gt; '' THEN '1' ELSE '0' END</td>
        <td>79</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN S.DifferentCard &lt;&gt; '' THEN '1' ELSE '0' END</td>
        <td>80</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN S.CheckRatesAvailability &lt;&gt; '' THEN '1' ELSE '0' END</td>
        <td>81</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN S.BalancePayment &lt;&gt; '' THEN '1' ELSE '0' END</td>
        <td>82</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN S.ReservationInquiry &lt;&gt; '' THEN '1' ELSE '0' END</td>
        <td>83</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN S.OtherQuestions &lt;&gt; '' THEN '1' ELSE '0' END</td>
        <td>84</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN S.TransferLocation &lt;&gt; '' THEN S.TransferLocation ELSE 'N/A' END</td>
        <td>85</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN S.EndInIVR &lt;&gt; '' THEN '1' ELSE '0' END</td>
        <td>86</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN S.Path &lt;&gt; '' THEN S.Path ELSE '0' END</td>
        <td>87</td>
      </tr>
      <tr valign="top">
        <td colspan="1">COMMIT TRANSACTION</td>
        <td colspan="1">COMMIT TRANSACTION</td>
        <td>96</td>
      </tr>
    </table>
  </body>
</html>