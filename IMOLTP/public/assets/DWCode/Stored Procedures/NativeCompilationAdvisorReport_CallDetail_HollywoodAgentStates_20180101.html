<?xml version="1.0" encoding="utf-8"?>
<html>
  <head>
    <title>Native Compilation Advisor evaluation results for [DWCode].[CallDetail_HollywoodAgentStates]</title>
  </head>
  <body>
    <p STYLE="font-family: Verdana, Arial, sans-serif; font-size: 14pt;">
      <b>Native Compilation Advisor evaluation results for [DWCode].[CallDetail_HollywoodAgentStates]</b>
    </p>
    <p STYLE="font-family: Verdana, Arial, sans-serif; font-size: 10pt;">
      <b>Report Date/Time:</b>1/1/2018 5:09 PM<br /></p>
    <table border="1" cellpadding="5" cellspacing="0" STYLE="font-family: Verdana, Arial, sans-serif; font-size: 9pt;">
      <tr style="background-color:Silver">
        <th colspan="1" align="center">Transact-SQL Element</th>
        <th align="center">Transact-SQL Code</th>
        <th align="center">Line Number</th>
      </tr>
      <tr valign="top">
        <td colspan="1">SELECT INTO</td>
        <td colspan="1">SELECT h.Agent_Session_ID,
       h.agent_no,
       A.first_name + ' ' + a.last_name AS Agent_Name,
       h.team_no,
       h.bus_no,
       d.StateIndex,
       d.start_date,
       d.working,
       d.available,
       d.outstate_code,
       d.log_state,
       d.skill_no,
       s.duration,
       s.End_Date
INTO   #agent_log
FROM   dbo.Agent_Log_Header AS h
       INNER JOIN
       dbo.Agents AS A
       ON H.Agent_no = A.Agent_No
       INNER JOIN
       dbo.Agent_Log_Detail AS d
       ON d.Agent_Session_ID = h.Agent_Session_ID
          AND D.start_date BETWEEN @Start AND @End
       INNER JOIN
       dbo.Agent_Log_Detail_Summary AS s
       ON s.Agent_Session_ID = d.Agent_Session_ID
          AND s.StateIndex = d.StateIndex
WHERE  h.bus_no = @Bus
       AND H.start_date BETWEEN @HStart AND @End
OPTION (MAXDOP 2)</td>
        <td>9</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1">MAXDOP</td>
        <td colspan="1">MAXDOP 2</td>
        <td>33</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">MAXDOP 2</td>
        <td>99</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1">CASE</td>
        <td colspan="1">CASE WHEN working = 1
          AND available = 1 THEN al.Duration / 1000.0 / 60.0 / 60.0 ELSE 0 END</td>
        <td>38</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN working = 0
          AND available = 1 THEN al.Duration / 1000.0 / 60.0 / 60.0 ELSE 0 END</td>
        <td>42</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN Outstate_code = 500647 THEN al.Duration / 1000.0 / 60.0 / 60.0 ELSE 0 END</td>
        <td>46</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN Outstate_code = 500641 THEN al.Duration / 1000.0 / 60.0 / 60.0 ELSE 0 END</td>
        <td>49</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN Outstate_code = 500651 THEN al.Duration / 1000.0 / 60.0 / 60.0 ELSE 0 END</td>
        <td>52</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN Outstate_code = 500631 THEN al.Duration / 1000.0 / 60.0 / 60.0 ELSE 0 END</td>
        <td>55</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN Outstate_code = 500636 THEN al.Duration / 1000.0 / 60.0 / 60.0 ELSE 0 END</td>
        <td>58</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN Outstate_code = 500649 THEN al.Duration / 1000.0 / 60.0 / 60.0 ELSE 0 END</td>
        <td>61</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN Outstate_code = 500632 THEN al.Duration / 1000.0 / 60.0 / 60.0 ELSE 0 END</td>
        <td>64</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN Outstate_code = 500630 THEN al.Duration / 1000.0 / 60.0 / 60.0 ELSE 0 END</td>
        <td>67</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN Outstate_code = 500633 THEN al.Duration / 1000.0 / 60.0 / 60.0 ELSE 0 END</td>
        <td>70</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN Outstate_code = 500634 THEN al.Duration / 1000.0 / 60.0 / 60.0 ELSE 0 END</td>
        <td>73</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN Outstate_code = 500635 THEN al.Duration / 1000.0 / 60.0 / 60.0 ELSE 0 END</td>
        <td>76</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN Outstate_code = 500644 THEN al.Duration / 1000.0 / 60.0 / 60.0 ELSE 0 END</td>
        <td>79</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN Outstate_code = 500652 THEN al.Duration / 1000.0 / 60.0 / 60.0 ELSE 0 END</td>
        <td>82</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN Outstate_code = 500654 THEN al.Duration / 1000.0 / 60.0 / 60.0 ELSE 0 END</td>
        <td>85</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN Outstate_code = 500656 THEN al.Duration / 1000.0 / 60.0 / 60.0 ELSE 0 END</td>
        <td>88</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN working = 0
          AND available = 0 THEN al.Duration / 1000.0 / 60.0 / 60.0 ELSE 0 END</td>
        <td>91</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1">One-part names</td>
        <td colspan="1">#agent_log AS al</td>
        <td>95</td>
      </tr>
    </table>
  </body>
</html>