<?xml version="1.0" encoding="utf-8"?>
<html>
  <head>
    <title>Native Compilation Advisor evaluation results for [DWCode].[CallDetail_GoExcellent_ContactData2]</title>
  </head>
  <body>
    <p STYLE="font-family: Verdana, Arial, sans-serif; font-size: 14pt;">
      <b>Native Compilation Advisor evaluation results for [DWCode].[CallDetail_GoExcellent_ContactData2]</b>
    </p>
    <p STYLE="font-family: Verdana, Arial, sans-serif; font-size: 10pt;">
      <b>Report Date/Time:</b>1/1/2018 5:09 PM<br /></p>
    <table border="1" cellpadding="5" cellspacing="0" STYLE="font-family: Verdana, Arial, sans-serif; font-size: 9pt;">
      <tr style="background-color:Silver">
        <th colspan="1" align="center">Transact-SQL Element</th>
        <th align="center">Transact-SQL Code</th>
        <th align="center">Line Number</th>
      </tr>
      <tr valign="top">
        <td colspan="1">BEGIN TRANSACTION</td>
        <td colspan="1">BEGIN TRANSACTION</td>
        <td>17</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1">SET OPTION ON</td>
        <td colspan="1">SET NOCOUNT ON</td>
        <td>18</td>
      </tr>
      <tr valign="top">
        <td colspan="1">One-part names</td>
        <td colspan="1">EXECUTE LockCriticalSection 'CallDetail_GoExcellent_ContactData2'</td>
        <td>22</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">#HPA AS HP</td>
        <td>102</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">#CallBack AS CB</td>
        <td>103</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1">SELECT INTO</td>
        <td colspan="1">SELECT DISTINCT D.Contact_ID
INTO   #HPA
FROM   dbo.Agent_Log_Header AS H
       INNER JOIN
       dbo.AGent_Log_Detail AS D
       ON H.Agent_Session_ID = D.Agent_Session_ID
WHERE  H.Bus_no = @p_Bus_No
       AND H.start_date BETWEEN @P_UTCStart_Date AND @P_UTCEnd_Date
       AND D.Outstate_Code = -2</td>
        <td>24</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">SELECT   H.Contact_ID,
         SUM(DS.Duration_Seconds) AS Duration,
         D.StateIndex
INTO     #CallBack
FROM     dbo.Contact_Log_Header AS H
         INNER JOIN
         dbo.Contact_Log_Detail AS D
         ON H.Contact_ID = D.Contact_ID
         INNER JOIN
         dbo.Contact_Log_Detail_Summary AS DS
         ON H.Contact_ID = DS.Contact_ID
            AND D.StateIndex = DS.StateIndex
WHERE    H.Bus_no = @p_Bus_No
         AND H.LastTouched BETWEEN @P_UTCStart_Date AND @P_UTCEnd_Date
         AND D.Contact_State = 15
GROUP BY H.Contact_ID, D.StateIndex</td>
        <td>35</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1">CASE</td>
        <td colspan="1">CASE WHEN S.Sla = 0 THEN 1 ELSE 0 END</td>
        <td>61</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN S.Sla = 1 THEN 1 ELSE 0 END</td>
        <td>62</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN F.INbound = 'T' THEN 1 ELSE 0 END</td>
        <td>63</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN F.INbound = 'F' THEN 1 ELSE 0 END</td>
        <td>64</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN F.INbound = 'T'
          AND S.Total_Seconds &gt; 2 THEN 1 ELSE 0 END</td>
        <td>65</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN F.INbound = 'T' THEN 1 ELSE 0 END</td>
        <td>66</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN S.inQueue_time &gt; 0 THEN 1 ELSE 0 END</td>
        <td>67</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN S.agent_Seconds &gt; 0 THEN 1 ELSE 0 END</td>
        <td>68</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN S.Abandon_SEconds &gt; 0 THEN S.Abandon_Seconds ELSE 0 END</td>
        <td>69</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN HP.Contact_ID &gt; 0 THEN 1 ELSE 0 END</td>
        <td>70</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN S.inQueue_Time &gt; 999 THEN S.inQueue_Seconds WHEN S.inQueue_Time &gt; 0 THEN 1 ELSE 0 END</td>
        <td>73</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN prequeue_Seconds &gt; 0
          AND inqueue_Seconds = 0
          AND agent_seconds = 0 THEN 1 ELSE 0 END</td>
        <td>77</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN S.Abandon_Seconds &gt; 0 THEN 1 ELSE 0 END</td>
        <td>78</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN S.isShortAbandon = 1 THEN 1 ELSE 0 END</td>
        <td>79</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN S.Abandon_Seconds &gt; 0 THEN 1 ELSE 0 END</td>
        <td>80</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN S.Agent_Seconds &gt; 0 THEN S.inQueue_Seconds ELSE 0 END</td>
        <td>81</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN S.Conf_Seconds &gt; 0 THEN 1 ELSE 0 END</td>
        <td>90</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN CB.Contact_ID &gt; 0 THEN 1 ELSE 0 END</td>
        <td>91</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN CB.Duration &gt; 0 THEN CB.DUration ELSE 0 END</td>
        <td>93</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN F.Inbound = 'T'
          AND S.Agent_Time &gt; 0 THEN 1 ELSE 0 END</td>
        <td>94</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1">COMMIT TRANSACTION</td>
        <td colspan="1">COMMIT TRANSACTION</td>
        <td>111</td>
      </tr>
    </table>
  </body>
</html>