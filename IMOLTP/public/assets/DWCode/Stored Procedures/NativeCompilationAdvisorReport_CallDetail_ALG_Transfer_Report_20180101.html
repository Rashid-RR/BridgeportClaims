<?xml version="1.0" encoding="utf-8"?>
<html>
  <head>
    <title>Native Compilation Advisor evaluation results for [DWCode].[CallDetail_ALG_Transfer_Report]</title>
  </head>
  <body>
    <p STYLE="font-family: Verdana, Arial, sans-serif; font-size: 14pt;">
      <b>Native Compilation Advisor evaluation results for [DWCode].[CallDetail_ALG_Transfer_Report]</b>
    </p>
    <p STYLE="font-family: Verdana, Arial, sans-serif; font-size: 10pt;">
      <b>Report Date/Time:</b>1/1/2018 5:09 PM<br /></p>
    <table border="1" cellpadding="5" cellspacing="0" STYLE="font-family: Verdana, Arial, sans-serif; font-size: 9pt;">
      <tr style="background-color:Silver">
        <th colspan="1" align="center">Transact-SQL Element</th>
        <th align="center">Transact-SQL Code</th>
        <th align="center">Line Number</th>
      </tr>
      <tr valign="top">
        <td colspan="1">BEGIN TRANSACTION</td>
        <td colspan="1">BEGIN TRANSACTION</td>
        <td>1</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1">One-part names</td>
        <td colspan="1">EXECUTE LockCriticalSection 'CallDetail_ALG_Transfer_Report'</td>
        <td>3</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">#TTable</td>
        <td>62</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">#TTable2 AS d1</td>
        <td>68</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">#TTable2 AS d2</td>
        <td>69</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1">SET OPTION ON</td>
        <td colspan="1">SET XACT_ABORT ON</td>
        <td>6</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">SET NOCOUNT ON</td>
        <td>7</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1">SELECT INTO</td>
        <td colspan="1">SELECT   H1.Master_Contact_ID AS [Master ID],
         H1.Contact_ID AS [Contact ID],
         CASE WHEN F1.Skill_No = 264309 THEN 'CCSalesInbound' WHEN F1.Skill_No = 264313 THEN 'CCRAInbound' WHEN F1.Skill_No = 264311 THEN 'CCTier2Inbound' WHEN F1.Skill_No = 264310 THEN 'CCTier1Inbound' WHEN F1.Skill_No = 324994 THEN 'CCMarketingInbound' ELSE CONVERT (VARCHAR (20), F1.Skill_No) END AS ReskilledOutOf,
         F1.Skill_No AS [ReskilledOutOf -Number],
         F2.Skill_No AS [ReskilledTo],
         CASE WHEN F2.Skill_No = 264309 THEN 'CCSalesInbound' WHEN F2.Skill_No = 264313 THEN 'CCRAInbound' WHEN F2.Skill_No = 264311 THEN 'CCTier2Inbound' WHEN F2.Skill_No = 264310 THEN 'CCTier1Inbound' WHEN F1.Skill_No = 324994 THEN 'CCMarketingInbound' ELSE 'Other' END AS [ReskilledTo-Name],
         F2.End_Date AS [Time]
INTO     #TTable
FROM     dbo.Contact_log_header AS h2
         INNER JOIN
         dbo.contact_log_footer AS f2
         ON h2.contact_id = f2.contact_id
         INNER JOIN
         dbo.contact_log_header AS h1
         ON h2.Master_Contact_Id = h1.Contact_id
         INNER JOIN
         dbo.contact_log_footer AS f1
         ON h1.contact_id = f1.contact_id
            AND F1.Skill_No IN ('264309', '264313', '264311', '264310', '324994')
WHERE    h2.bus_no = @p_Bus_no
         AND H2.Start_Date BETWEEN @p_UTCStart_Date AND @p_UTCEnd_Date
         AND H2.reskillindicator = 1
ORDER BY [Master ID]</td>
        <td>22</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">SELECT   DISTINCT [Master ID],
                  [Contact ID],
                  ReskilledOutOf,
                  [ReskilledOutOf -Number],
                  ReskilledTo,
                  [ReskilledTo-Name],
                  [Time]
INTO     #TTable2
FROM     #TTable
ORDER BY [Master ID]</td>
        <td>60</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1">CASE</td>
        <td colspan="1">CASE WHEN F1.Skill_No = 264309 THEN 'CCSalesInbound' WHEN F1.Skill_No = 264313 THEN 'CCRAInbound' WHEN F1.Skill_No = 264311 THEN 'CCTier2Inbound' WHEN F1.Skill_No = 264310 THEN 'CCTier1Inbound' WHEN F1.Skill_No = 324994 THEN 'CCMarketingInbound' ELSE CONVERT (VARCHAR (20), F1.Skill_No) END</td>
        <td>25</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">CASE WHEN F2.Skill_No = 264309 THEN 'CCSalesInbound' WHEN F2.Skill_No = 264313 THEN 'CCRAInbound' WHEN F2.Skill_No = 264311 THEN 'CCTier2Inbound' WHEN F2.Skill_No = 264310 THEN 'CCTier1Inbound' WHEN F1.Skill_No = 324994 THEN 'CCMarketingInbound' ELSE 'Other' END</td>
        <td>36</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1">COMMIT TRANSACTION</td>
        <td colspan="1">COMMIT TRANSACTION</td>
        <td>74</td>
      </tr>
    </table>
  </body>
</html>