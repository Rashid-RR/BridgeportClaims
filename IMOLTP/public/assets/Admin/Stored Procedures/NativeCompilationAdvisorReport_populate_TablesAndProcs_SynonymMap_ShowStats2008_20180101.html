<?xml version="1.0" encoding="utf-8"?>
<html>
  <head>
    <title>Native Compilation Advisor evaluation results for [Admin].[populate_TablesAndProcs_SynonymMap_ShowStats2008]</title>
  </head>
  <body>
    <p STYLE="font-family: Verdana, Arial, sans-serif; font-size: 14pt;">
      <b>Native Compilation Advisor evaluation results for [Admin].[populate_TablesAndProcs_SynonymMap_ShowStats2008]</b>
    </p>
    <p STYLE="font-family: Verdana, Arial, sans-serif; font-size: 10pt;">
      <b>Report Date/Time:</b>1/1/2018 4:58 PM<br /></p>
    <table border="1" cellpadding="5" cellspacing="0" STYLE="font-family: Verdana, Arial, sans-serif; font-size: 9pt;">
      <tr style="background-color:Silver">
        <th colspan="1" align="center">Transact-SQL Element</th>
        <th align="center">Transact-SQL Code</th>
        <th align="center">Line Number</th>
      </tr>
      <tr valign="top">
        <td colspan="1">SET OPTION ON</td>
        <td colspan="1">SET NOCOUNT ON</td>
        <td>21</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1">SET OPTION OFF</td>
        <td colspan="1">SET ANSI_WARNINGS OFF</td>
        <td>21</td>
      </tr>
      <tr valign="top">
        <td colspan="1">OBJECT_ID</td>
        <td colspan="1">OBJECT_ID('TablesAndProcs')</td>
        <td>23</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">OBJECT_ID('SynonymMap')</td>
        <td>33</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">OBJECT_ID('StatsTemp')</td>
        <td>43</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">OBJECT_ID('StatsFinal')</td>
        <td>57</td>
      </tr>
      <tr valign="top">
        <td colspan="1">Cursors</td>
        <td colspan="1">CURSOR
    FOR SELECT name
        FROM   sys.databases
        WHERE  state_desc = 'online'
               AND database_id &gt; 4
               AND name NOT LIKE '%$%'</td>
        <td>77</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1">LIKE</td>
        <td colspan="1">name NOT LIKE '%$%'</td>
        <td>80</td>
      </tr>
      <tr valign="top">
        <td colspan="1">FETCH CURSOR</td>
        <td colspan="1">FETCH NEXT FROM ACT_CURS INTO @DBName</td>
        <td>84</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">FETCH NEXT FROM ACT_CURS INTO @DBName</td>
        <td>209</td>
      </tr>
      <tr valign="top">
        <td colspan="1">@@fetch_status</td>
        <td colspan="1">@@fetch_status</td>
        <td>85</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1">REPLACE</td>
        <td colspan="1">REPLACE(@SQL, '@DBName', @DBName)</td>
        <td>204</td>
      </tr>
      <tr valign="top">
        <td colspan="1">EXECUTE string</td>
        <td colspan="1">EXECUTE (@SQL)</td>
        <td>206</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1">One-part names</td>
        <td colspan="1">t</td>
        <td>217</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">TablesAndProcs AS t</td>
        <td>222</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">SynonymMap AS s</td>
        <td>223</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">TablesAndProcs</td>
        <td>233</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">StatsFinal</td>
        <td>236</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">TablesAndProcs</td>
        <td>241</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">StatsFinal</td>
        <td>244</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">TablesAndProcs</td>
        <td>249</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">StatsFinal</td>
        <td>252</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">TablesAndProcs</td>
        <td>262</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">#procCT AS x</td>
        <td>268</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">#tmp</td>
        <td>276</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1">UPDATE with FROM clause</td>
        <td colspan="1">
FROM TablesAndProcs AS t
     INNER JOIN
     SynonymMap AS s
     ON t.DatabaseName = s.SynonymDB
        AND t.TableName = s.SynonymName
        AND t.type_desc = 'SYNONYM'</td>
        <td>222</td>
      </tr>
      <tr valign="top">
        <td colspan="1">SELECT INTO</td>
        <td colspan="1">SELECT   DatabaseName,
         SchemaName,
         TableName,
         count(DISTINCT procname) AS ProcCT
INTO     #procCT
FROM     TablesAndProcs
GROUP BY DatabaseName, SchemaName, TableName</td>
        <td>260</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">SELECT DISTINCT s.*,
                ProcCT
INTO   #tmp
FROM   admin..StatsFinal AS s
       INNER JOIN
       admin..TablesAndProcs AS o
       ON s.tablename = o.tablename
          AND s.SchemaName = o.SchemaName
          AND s.DatabaseName = o.DatabaseName
       LEFT OUTER JOIN
       #procCT AS x
       ON s.TableName = x.TableName
          AND s.SchemaName = o.SchemaName</td>
        <td>265</td>
      </tr>
      <tr valign="top">
        <td colspan="1">DISTINCT</td>
        <td colspan="1">count(DISTINCT procname)</td>
        <td>260</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1">*</td>
        <td colspan="1">SELECT DISTINCT s.*,
                ProcCT
INTO   #tmp
FROM   admin..StatsFinal AS s
       INNER JOIN
       admin..TablesAndProcs AS o
       ON s.tablename = o.tablename
          AND s.SchemaName = o.SchemaName
          AND s.DatabaseName = o.DatabaseName
       LEFT OUTER JOIN
       #procCT AS x
       ON s.TableName = x.TableName
          AND s.SchemaName = o.SchemaName</td>
        <td>265</td>
      </tr>
      <tr valign="top">
        <td colspan="1">Three-part names</td>
        <td colspan="1">admin..StatsFinal</td>
        <td>267</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">admin..TablesAndProcs</td>
        <td>267</td>
      </tr>
    </table>
  </body>
</html>