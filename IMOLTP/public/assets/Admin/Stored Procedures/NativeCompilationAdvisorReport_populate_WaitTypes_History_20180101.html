<?xml version="1.0" encoding="utf-8"?>
<html>
  <head>
    <title>Native Compilation Advisor evaluation results for [Admin].[populate_WaitTypes_History]</title>
  </head>
  <body>
    <p STYLE="font-family: Verdana, Arial, sans-serif; font-size: 14pt;">
      <b>Native Compilation Advisor evaluation results for [Admin].[populate_WaitTypes_History]</b>
    </p>
    <p STYLE="font-family: Verdana, Arial, sans-serif; font-size: 10pt;">
      <b>Report Date/Time:</b>1/1/2018 4:59 PM<br /></p>
    <table border="1" cellpadding="5" cellspacing="0" STYLE="font-family: Verdana, Arial, sans-serif; font-size: 9pt;">
      <tr style="background-color:Silver">
        <th colspan="1" align="center">Transact-SQL Element</th>
        <th align="center">Transact-SQL Code</th>
        <th align="center">Line Number</th>
      </tr>
      <tr valign="top">
        <td colspan="1">SET OPTION ON</td>
        <td colspan="1">SET NOCOUNT ON</td>
        <td>1</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1">OBJECT_ID</td>
        <td colspan="1">OBJECT_ID('WaitTypes_History')</td>
        <td>16</td>
      </tr>
      <tr valign="top">
        <td colspan="1">Three-part names</td>
        <td colspan="1">master..sysprocesses</td>
        <td>89</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">MASTER.DBO.SYSPROCESSES</td>
        <td>111</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">master..sysprocesses</td>
        <td>182</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1">LIKE</td>
        <td colspan="1">s.cmd NOT LIKE '%BACKUP%'</td>
        <td>91</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">s.cmd NOT LIKE '%RESTORE%'</td>
        <td>92</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">s.cmd NOT LIKE '%BACKUP%'</td>
        <td>184</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">s.cmd NOT LIKE '%RESTORE%'</td>
        <td>185</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">ProcName LIKE '%execute%'</td>
        <td>197</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">ProcName NOT LIKE '%sp_executesql%'</td>
        <td>198</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">ProcName LIKE '%' + @OpenVal + '%' + @CloseVal + '%'</td>
        <td>206</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">ProcName LIKE '%' + @OpenVal + '%' + @CloseVal + '%'</td>
        <td>213</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">ProcName LIKE '%' + @CloseVal + '%'</td>
        <td>220</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">ProcName LIKE '%Exec%'</td>
        <td>227</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">ProcName LIKE '%Exec%'</td>
        <td>233</td>
      </tr>
      <tr valign="top">
        <td colspan="1">DB_NAME</td>
        <td colspan="1">db_name(s.dbid)</td>
        <td>101</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1">STR</td>
        <td colspan="1">STR(@spid)</td>
        <td>117</td>
      </tr>
      <tr valign="top">
        <td colspan="1">One-part names</td>
        <td colspan="1">#Inputbuffer</td>
        <td>118</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">#Inputbuffer</td>
        <td>119</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">#InputBuffer</td>
        <td>126</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">#InputBuffer</td>
        <td>134</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">#curr</td>
        <td>137</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">#curr</td>
        <td>170</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">#curr</td>
        <td>175</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">#curr</td>
        <td>196</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">#curr</td>
        <td>204</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">#curr</td>
        <td>211</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">#curr</td>
        <td>218</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">#curr</td>
        <td>224</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">#curr</td>
        <td>230</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">#curr</td>
        <td>236</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">WaitTypes_History</td>
        <td>245</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">#curr</td>
        <td>284</td>
      </tr>
      <tr valign="top">
        <td colspan="1">INSERT EXEC</td>
        <td colspan="1">INSERT #Inputbuffer
EXECUTE (@cmd)</td>
        <td>119</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1">fn_get_sql</td>
        <td colspan="1">::fn_get_sql (@sql_handle)</td>
        <td>130</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">::fn_get_sql (@sql_handle)</td>
        <td>172</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">::fn_get_sql (@sql_handle)</td>
        <td>177</td>
      </tr>
      <tr valign="top">
        <td colspan="1">COALESCE</td>
        <td colspan="1">COALESCE (RTRIM(EventInfo), '')</td>
        <td>133</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1">UPDATE with FROM clause</td>
        <td colspan="1">
FROM ::fn_get_sql (@sql_handle)</td>
        <td>172</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">
FROM ::fn_get_sql (@sql_handle)</td>
        <td>177</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">
FROM master..sysprocesses AS s</td>
        <td>182</td>
      </tr>
      <tr valign="top">
        <td colspan="1">Subquery</td>
        <td colspan="1">(SELECT MIN(SPID)
 FROM   master..sysprocesses AS s
 WHERE  (s.cmd &lt;&gt; 'AWAITING COMMAND'
         AND s.cmd NOT LIKE '%BACKUP%'
         AND s.cmd NOT LIKE '%RESTORE%')
        AND lastwaittype NOT IN ('SLEEP')
        AND s.spid &gt; 50
        AND s.spid &lt;&gt; @@spid
        AND SPID &gt; @SPID)</td>
        <td>181</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1">REPLACE</td>
        <td colspan="1">replace(ProcName, 'execute', 'exec')</td>
        <td>196</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(isnull(replace(ProcName, ' ', ''), isnull(ProcName, '')), '', ''), ';', ''), '(', ''), '1', ''), 'exec ', ''), 'dbo.', ''), '@', ''), '..', '.'), 'admin.', ''), 'FileServer.', ''), 'FileServerDB.', ''), 'CREATEFUNCTION', ''), 'CREATEPROCEDURE', ''), db + '.', ''), '"', '')</td>
        <td>237</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(isnull(replace(ProcName, ' ', ''), isnull(ProcName, '')), '', ''), ';', ''), '(', ''), '1', ''), 'exec ', ''), 'dbo.', ''), '@', ''), '..', '.'), 'admin.', ''), 'FileServer.', ''), 'FileServerDB.', ''), 'CREATEFUNCTION', ''), 'CREATEPROCEDURE', ''), db + '.', '')</td>
        <td>237</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(isnull(replace(ProcName, ' ', ''), isnull(ProcName, '')), '', ''), ';', ''), '(', ''), '1', ''), 'exec ', ''), 'dbo.', ''), '@', ''), '..', '.'), 'admin.', ''), 'FileServer.', ''), 'FileServerDB.', ''), 'CREATEFUNCTION', ''), 'CREATEPROCEDURE', '')</td>
        <td>237</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(isnull(replace(ProcName, ' ', ''), isnull(ProcName, '')), '', ''), ';', ''), '(', ''), '1', ''), 'exec ', ''), 'dbo.', ''), '@', ''), '..', '.'), 'admin.', ''), 'FileServer.', ''), 'FileServerDB.', ''), 'CREATEFUNCTION', '')</td>
        <td>237</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(isnull(replace(ProcName, ' ', ''), isnull(ProcName, '')), '', ''), ';', ''), '(', ''), '1', ''), 'exec ', ''), 'dbo.', ''), '@', ''), '..', '.'), 'admin.', ''), 'FileServer.', ''), 'FileServerDB.', '')</td>
        <td>237</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(isnull(replace(ProcName, ' ', ''), isnull(ProcName, '')), '', ''), ';', ''), '(', ''), '1', ''), 'exec ', ''), 'dbo.', ''), '@', ''), '..', '.'), 'admin.', ''), 'FileServer.', '')</td>
        <td>237</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">replace(replace(replace(replace(replace(replace(replace(replace(replace(isnull(replace(ProcName, ' ', ''), isnull(ProcName, '')), '', ''), ';', ''), '(', ''), '1', ''), 'exec ', ''), 'dbo.', ''), '@', ''), '..', '.'), 'admin.', '')</td>
        <td>237</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">replace(replace(replace(replace(replace(replace(replace(replace(isnull(replace(ProcName, ' ', ''), isnull(ProcName, '')), '', ''), ';', ''), '(', ''), '1', ''), 'exec ', ''), 'dbo.', ''), '@', ''), '..', '.')</td>
        <td>237</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">replace(replace(replace(replace(replace(replace(replace(isnull(replace(ProcName, ' ', ''), isnull(ProcName, '')), '', ''), ';', ''), '(', ''), '1', ''), 'exec ', ''), 'dbo.', ''), '@', '')</td>
        <td>237</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">replace(replace(replace(replace(replace(replace(isnull(replace(ProcName, ' ', ''), isnull(ProcName, '')), '', ''), ';', ''), '(', ''), '1', ''), 'exec ', ''), 'dbo.', '')</td>
        <td>237</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">replace(replace(replace(replace(replace(isnull(replace(ProcName, ' ', ''), isnull(ProcName, '')), '', ''), ';', ''), '(', ''), '1', ''), 'exec ', '')</td>
        <td>237</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">replace(replace(replace(replace(isnull(replace(ProcName, ' ', ''), isnull(ProcName, '')), '', ''), ';', ''), '(', ''), '1', '')</td>
        <td>237</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">replace(replace(replace(isnull(replace(ProcName, ' ', ''), isnull(ProcName, '')), '', ''), ';', ''), '(', '')</td>
        <td>237</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">replace(replace(isnull(replace(ProcName, ' ', ''), isnull(ProcName, '')), '', ''), ';', '')</td>
        <td>237</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">replace(isnull(replace(ProcName, ' ', ''), isnull(ProcName, '')), '', '')</td>
        <td>237</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">replace(ProcName, ' ', '')</td>
        <td>238</td>
      </tr>
      <tr valign="top">
        <td colspan="1">CHARINDEX</td>
        <td colspan="1">CHARINDEX(@OpenVal, ProcName)</td>
        <td>205</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">CHARINDEX(@CloseVal, ProcName, CHARINDEX(@OpenVal, ProcName))</td>
        <td>205</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">CHARINDEX(@OpenVal, ProcName)</td>
        <td>205</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">CHARINDEX(@OpenVal, ProcName)</td>
        <td>205</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">CHARINDEX(@OpenVal, ProcName)</td>
        <td>212</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">CHARINDEX(@CloseVal, ProcName, CHARINDEX(@OpenVal, ProcName))</td>
        <td>212</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">CHARINDEX(@OpenVal, ProcName)</td>
        <td>212</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">CHARINDEX(@OpenVal, ProcName)</td>
        <td>212</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">CHARINDEX(@CloseVal, ProcName)</td>
        <td>219</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">CHARINDEX(' ', ProcName, CHARINDEX('Exec', ProcName))</td>
        <td>225</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">CHARINDEX('Exec', ProcName)</td>
        <td>225</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">CHARINDEX(' ', RIGHT(ProcName, LEN(ProcName) - CHARINDEX(' ', ProcName, CHARINDEX('Exec', ProcName))) + ' ')</td>
        <td>225</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">CHARINDEX(' ', ProcName, CHARINDEX('Exec', ProcName))</td>
        <td>226</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">CHARINDEX('Exec', ProcName)</td>
        <td>226</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">CHARINDEX(' ', ProcName, CHARINDEX('Exec', ProcName))</td>
        <td>231</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">CHARINDEX('Exec', ProcName)</td>
        <td>231</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">CHARINDEX(' ', RIGHT(ProcName, LEN(ProcName) - CHARINDEX(' ', ProcName, CHARINDEX('Exec', ProcName))) + '''')</td>
        <td>231</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">CHARINDEX(' ', ProcName, CHARINDEX('Exec', ProcName))</td>
        <td>232</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">CHARINDEX('Exec', ProcName)</td>
        <td>232</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1">LEFT</td>
        <td colspan="1">LEFT(RIGHT(ProcName, LEN(ProcName) - CHARINDEX(' ', ProcName, CHARINDEX('Exec', ProcName))), CHARINDEX(' ', RIGHT(ProcName, LEN(ProcName) - CHARINDEX(' ', ProcName, CHARINDEX('Exec', ProcName))) + ' '))</td>
        <td>225</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">LEFT(RIGHT(ProcName, LEN(ProcName) - CHARINDEX(' ', ProcName, CHARINDEX('Exec', ProcName))), CHARINDEX(' ', RIGHT(ProcName, LEN(ProcName) - CHARINDEX(' ', ProcName, CHARINDEX('Exec', ProcName))) + ''''))</td>
        <td>231</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1">RIGHT</td>
        <td colspan="1">RIGHT(ProcName, LEN(ProcName) - CHARINDEX(' ', ProcName, CHARINDEX('Exec', ProcName)))</td>
        <td>225</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">RIGHT(ProcName, LEN(ProcName) - CHARINDEX(' ', ProcName, CHARINDEX('Exec', ProcName)))</td>
        <td>225</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1"></td>
        <td colspan="1">RIGHT(ProcName, LEN(ProcName) - CHARINDEX(' ', ProcName, CHARINDEX('Exec', ProcName)))</td>
        <td>231</td>
      </tr>
      <tr valign="top">
        <td colspan="1"></td>
        <td colspan="1">RIGHT(ProcName, LEN(ProcName) - CHARINDEX(' ', ProcName, CHARINDEX('Exec', ProcName)))</td>
        <td>231</td>
      </tr>
      <tr valign="top" style="background-color:LightYellow">
        <td colspan="1">@@servername</td>
        <td colspan="1">@@servername</td>
        <td>265</td>
      </tr>
      <tr valign="top">
        <td colspan="1">CASE</td>
        <td colspan="1">CASE WHEN blocked = spid THEN -1 ELSE blocked END</td>
        <td>268</td>
      </tr>
    </table>
  </body>
</html>