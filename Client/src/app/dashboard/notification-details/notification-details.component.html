<ng-container *ngIf="notifications.length">
  <div class="notification-header table-responsive top-header scroll-y">
    <table class="table no-margin table-striped">
      <thead class="overflowable">
        <tr (tableSort)="onSortColumn($event)" #myTable='table-sort' [class.rows6]="!allowed">
          <th>
            <span columnSort="messageText" [sort-table]="myTable"> Message</span>
          </th>
          <th>
            <span columnSort="notificationType" [sort-table]="myTable">Type</span>
          </th>
          <th>
            &nbsp;
          </th>
        </tr>
      </thead>
    </table>
  </div>
  <form role="form" [formGroup]="form" autocomplete="off" autocapitalize="none" autocomplete="off"
    (keyup.enter)="saveButtonClick()">
    <div class="notification-details table-responsive table-body scroll-y">
      <table class="table no-margin table-striped" id="maintable">
        <tbody class="overflowable" #paymentsTable tabindex="0">
          <ng-container *ngIf="loadingNotification">
            <div class="loader" style="align-self: center;  margin-top: 30px;">
              <a>
                <img src="assets/img/Spinner.gif">
              </a>
            </div>
          </ng-container>
          <tr *ngFor="let n of notifications">
            <ng-container *ngIf="editingNotificationId === n.notificationId">
              <td>{{n.messageText}}</td>
              <td>{{n.notificationType}}</td>
              <td>
                <ng-container *ngIf="n.notificationType != 'New Client Referral'">
                  <textarea class="form-control" name="letterName" formControlName="letterName"
                    (focus)="submitted=false" placeholder="Letter Name"></textarea>
                  <button type="button" mat-raised-button  color="success" (click)="saveNotification(n); $event.stopPropagation()"
                    id="saveNotificationButton"> Save
                  </button>
                  <button type="button" mat-raised-button  color="warn" (click)="cancel(); $event.stopPropagation()">
                    Cancel
                  </button>
                </ng-container>
                <ng-container *ngIf="n.notificationType == 'New Client Referral'">
                  <button type="button" mat-flat-button color="warn" class="btn btn-warn"
                    (click)="dismissNotification(n); $event.stopPropagation()" id="dismissNotificationButton"> Dismiss
                  </button>
                </ng-container>
              </td>
            </ng-container>
            <ng-container *ngIf="editingNotificationId !== n.notificationId">
              <td>{{n.messageText}}</td>
              <td>{{n.notificationType}}</td>
              <td>
                <button type="button" mat-button *ngIf="n.notificationType != 'New Client Referral'"
                   color="blue-b" (click)="update(n); $event.stopPropagation()">
                  Set Letter Name
                </button>
                <button *ngIf="n.notificationType == 'New Client Referral'" type="button" mat-raised-button  color="warn"
                   (click)="dismissNotification(n); $event.stopPropagation()"
                  id="dismissNotificationButton"> Dismiss
                </button>
              </td>
            </ng-container>
          </tr>
        </tbody>
      </table>
    </div>
  </form>
</ng-container>
